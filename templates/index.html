<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Swap Kids Global</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              teal: {
                50: "#f0fdfa",
                100: "#ccfbf1",
                200: "#99f6e4",
                300: "#5eead4",
                400: "#2dd4bf",
                500: "#14b8a6",
                600: "#0d9488",
                700: "#0f766e",
                800: "#115e59",
                900: "#134e4a",
              },
            },
            fontFamily: { sans: ["Inter", "system-ui", "sans-serif"] },
          },
        },
      };
    </script>
    <style>
      * {
        -webkit-tap-highlight-color: transparent;
      }
      body {
        font-family: "Inter", system-ui, sans-serif;
        background: linear-gradient(
          135deg,
          #f0fdfa 0%,
          #e0f2fe 50%,
          #f0f9ff 100%
        );
        min-height: 100vh;
      }
      .card-hover {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .slide-up {
        animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }
      @keyframes slideUp {
        from {
          transform: translateY(100%);
        }
        to {
          transform: translateY(0);
        }
      }
      .item-card {
        animation: fadeInUp 0.5s ease-out forwards;
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .loading-spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #14b8a6;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .modal-enter {
        animation: modalIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }
      @keyframes modalIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 min-h-screen"
  >
    <div
      class="max-w-md mx-auto bg-white rounded-[2.5rem] overflow-hidden min-h-screen relative shadow-2xl"
    >
      <!-- Header -->
      <div class="bg-gradient-to-r from-teal-600 to-teal-500 px-6 pb-6 pt-4">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-2xl font-bold text-white flex items-center gap-2">
              <i class="fas fa-exchange-alt"></i>
              <span id="appTitle">Swap Kids</span>
            </h1>
            <p class="text-teal-100 text-sm mt-1" id="appSubtitle">
              –û–±–º–µ–Ω –¥–µ—Ç—Å–∫–∏–º–∏ –≤–µ—â–∞–º–∏
            </p>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex items-center gap-1">
              <div 
                onclick="openLeaderboard()"
                class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white cursor-pointer hover:bg-white/30 transition-all mr-1"
                title="Leaderboard"
              >
                <i class="fas fa-trophy text-xs"></i>
              </div>
              <select
                id="langSelector"
                onchange="changeLanguage()"
                class="bg-white/20 text-white text-sm rounded-full px-2 py-1 border-0 outline-none cursor-pointer"
              >
              <option value="ru" class="text-gray-800">üá∑üá∫ RU</option>
              <option value="en" class="text-gray-800">üá∫üá∏ EN</option>
              <option value="es" class="text-gray-800">üá™üá∏ ES</option>
              <option value="pt" class="text-gray-800">üáµüáπ PT</option>
              <option value="uk" class="text-gray-800">üá∫üá¶ UK</option>
              <option value="ka" class="text-gray-800">üá¨üá™ KA</option>
            </select>
            <div
              id="profileEntry"
              onclick="switchView('profile')"
              class="w-10 h-10 rounded-full border-2 border-white/30 overflow-hidden flex items-center justify-center backdrop-blur cursor-pointer hover:scale-105 transition-transform"
            >
              <img id="userAvatar" src="" alt="" class="w-full h-full object-cover hidden" />
              <i id="userAvatarIcon" class="fas fa-user-circle text-white text-2xl"></i>
            </div>
          </div>
        </div>
        <div class="mt-4 relative">
          <i
            class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-teal-400"
          ></i>
          <input
            type="text"
            id="searchInput"
            placeholder="–ü–æ–∏—Å–∫ –≤–µ—â–µ–π..."
            class="w-full pl-11 pr-4 py-3 rounded-xl bg-white/95 border-0 text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white/50"
          />
        </div>
      </div>

      <!-- Location Bar -->
      <div class="px-4 py-3 bg-white border-b border-gray-100">
        <div class="flex items-center justify-between">
          <div class="flex flex-col">
            <span id="locationDisplay" class="text-sm text-gray-600">
              <i class="fas fa-map-marker-alt text-teal-500 mr-1"></i>üìç –í—ã–±–µ—Ä–∏—Ç–µ
              –ª–æ–∫–∞—Ü–∏—é
            </span>
            <button id="showGlobalBtn" onclick="toggleGlobalView()" class="text-teal-600 text-[10px] font-bold uppercase tracking-wider mt-1 flex items-center gap-1 hidden">
              <i class="fas fa-globe"></i><span id="showEverywhereText">–ü–æ–∫–∞–∑–∞—Ç—å –≤–µ–∑–¥–µ</span>
            </button>
          </div>
          <button
            onclick="showLocationModal()"
            class="text-teal-600 text-sm font-medium hover:text-teal-700"
          >
            <i class="fas fa-edit mr-1"></i
            ><span id="changeLocationBtn">–ò–∑–º–µ–Ω–∏—Ç—å</span>
          </button>
        </div>
      </div>

      <!-- Main Content Views -->
      <div id="homeView" class="view-content">
        <!-- Feed Type Toggle -->
        <div class="px-4 pt-4 bg-white">
          <div class="flex p-1 bg-gray-100 rounded-2xl">
            <button id="tabGiveaway" onclick="switchFeedType('giveaway')" class="flex-1 py-2 text-sm font-bold rounded-xl transition-all bg-white text-teal-600 shadow-sm">
              <i class="fas fa-gift mr-1"></i><span id="labelGiveaway">–û—Ç–¥–∞—é—Ç</span>
            </button>
            <button id="tabWish" onclick="switchFeedType('wish')" class="flex-1 py-2 text-sm font-bold rounded-xl transition-all text-gray-500">
              <i class="fas fa-bullhorn mr-1"></i><span id="labelWish">–ò—â—É—Ç</span>
            </button>
          </div>
        </div>
        <!-- Categories -->
        <div class="px-4 py-4 bg-white border-b border-gray-100">
          <div
            class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide"
            id="categories"
          >
            <button
              class="category-btn active px-4 py-2 bg-teal-500 text-white rounded-full text-sm font-medium whitespace-nowrap transition-all"
              data-category="all"
            >
              –í—Å–µ
            </button>
            <button
              class="category-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap transition-all hover:bg-gray-200"
              data-category="clothes"
            >
              <i class="fas fa-tshirt mr-1"></i>–û–¥–µ–∂–¥–∞
            </button>
            <button
              class="category-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap transition-all hover:bg-gray-200"
              data-category="toys"
            >
              <i class="fas fa-gamepad mr-1"></i>–ò–≥—Ä—É—à–∫–∏
            </button>
            <button
              class="category-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap transition-all hover:bg-gray-200"
              data-category="gear"
            >
              <i class="fas fa-baby-carriage mr-1"></i>–ö–æ–ª—è—Å–∫–∏
            </button>
            <button
              class="category-btn px-4 py-2 bg-gray-100 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap transition-all hover:bg-gray-200"
              data-category="seats"
            >
              <i class="fas fa-chair mr-1"></i>–ê–≤—Ç–æ–∫—Ä–µ—Å–ª–∞
            </button>
          </div>
        </div>

        <!-- Welcome Message -->
        <div
          id="welcomeMessage"
          class="px-4 py-4 bg-gradient-to-r from-teal-50 to-cyan-50 border-b border-teal-100"
        >
          <div class="flex items-start gap-3">
            <div
              class="w-10 h-10 bg-teal-500 rounded-full flex items-center justify-center text-white flex-shrink-0"
            >
              <i class="fas fa-hand-wave"></i>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800" id="welcomeTitle">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üëã
              </h3>
              <p
                class="text-sm text-gray-700 mt-1 font-medium"
                id="welcomeSubtitle"
              >
                –ó–¥–µ—Å—å —Ä–æ–¥–∏—Ç–µ–ª–∏ –º–µ–Ω—è—é—Ç—Å—è –¥–µ—Ç—Å–∫–∏–º–∏ –≤–µ—â–∞–º–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.
              </p>
              <p class="text-sm text-gray-600 mt-2" id="welcomeText">
                –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Å—Ç—Ä–∞–Ω—É –∏ –≥–æ—Ä–æ–¥, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª–µ–π
                —Ä—è–¥–æ–º —Å –≤–∞–º–∏.
              </p>
              <button
                onclick="showLocationModal()"
                class="mt-2 text-teal-600 text-sm font-medium hover:text-teal-700"
              >
                <i class="fas fa-map-marker-alt mr-1"></i
                ><span id="selectLocationBtnText">–í—ã–±—Ä–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é</span>
              </button>
            </div>
          </div>
        </div>


        <!-- Items Grid -->
        <div
          class="px-4 py-4 pb-24 overflow-y-auto"
          style="max-height: calc(100vh - 320px)"
        >
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-800" id="feedTitle">
              –õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            </h2>
            <span class="text-sm text-gray-500" id="itemsCount">0 –≤–µ—â–µ–π</span>
          </div>
          <div id="itemsGrid" class="grid grid-cols-2 gap-3"></div>
        </div>
      </div>

      <!-- Profile View (Modal Overlay) -->
      <div id="profileView" class="fixed inset-0 z-50 hidden">
          <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="switchView('home')"></div>
          <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-w-md mx-auto h-[90vh] overflow-y-auto slide-up p-6">
              <div class="flex items-center justify-between mb-6">
                  <h3 class="text-xl font-bold text-gray-800" id="profileTitle">–ü—Ä–æ—Ñ–∏–ª—å</h3>
                  <button onclick="switchView('home')" class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600">
                      <i class="fas fa-times"></i>
                  </button>
              </div>

              <div class="bg-gradient-to-br from-teal-500 to-teal-600 rounded-3xl p-6 text-white mb-6 shadow-lg shadow-teal-500/20">
                  <div class="flex items-center gap-4 mb-6">
                      <div class="w-16 h-16 bg-white/20 rounded-2xl overflow-hidden flex items-center justify-center backdrop-blur">
                          <img id="profilePhoto" src="" alt="" class="w-full h-full object-cover hidden" />
                          <i id="profilePhotoIcon" class="fas fa-user text-3xl"></i>
                      </div>
                      <div>
                          <h3 class="text-xl font-bold" id="profileName">User Name</h3>
                          <p class="text-teal-100 text-sm" id="profileStatsLabel">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
                      </div>
                  </div>
                  <div class="grid grid-cols-2 gap-3">
                      <div class="bg-white/10 rounded-2xl p-4 backdrop-blur">
                          <div class="text-2xl font-bold" id="statsGivenCount">0</div>
                          <div class="text-xs text-teal-100 uppercase tracking-wider mt-1" id="statsGivenLabel">–û—Ç–¥–∞–Ω–æ –≤–µ—â–µ–π</div>
                      </div>
                      <div class="bg-white/10 rounded-2xl p-4 backdrop-blur">
                          <div class="text-2xl font-bold" id="statsRank">Hero</div>
                          <div class="text-xs text-teal-100 uppercase tracking-wider mt-1" id="statsRankLabel">–°—Ç–∞—Ç—É—Å</div>
                      </div>
                  </div>
              </div>

              <div class="mb-6">
                  <h4 class="text-lg font-bold text-gray-800 mb-4" id="myItemsTitle">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h4>
                  <div id="myItemsList" class="space-y-3">
                      <!-- My items here -->
                  </div>
              </div>
              
              <button onclick="showFavorites()" class="w-full py-4 bg-gray-50 border border-gray-200 text-gray-700 rounded-2xl font-semibold flex items-center justify-center gap-2 hover:bg-gray-100 transition-all">
                  <i class="fas fa-heart text-teal-500"></i>
                  <span id="openFavoritesBtn">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
              </button>
          </div>
      </div>

      <!-- FAB (Restored to original position) -->
      <button
        id="fabAdd"
        onclick="openAddModal()"
        class="fixed bottom-8 right-6 w-14 h-14 bg-gradient-to-r from-teal-500 to-teal-600 rounded-full shadow-lg shadow-teal-500/40 flex items-center justify-center text-white text-2xl z-40 transition-transform hover:scale-110"
      >
        <i class="fas fa-plus"></i>
      </button>
    </div>

    <!-- Location Modal -->
    <div id="locationModal" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onclick="closeLocationModal()"
      ></div>
      <div
        class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-w-md mx-auto slide-up p-6"
      >
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold text-gray-800" id="locationModalTitle">
            üìç –í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é
          </h3>
          <button
            onclick="closeLocationModal()"
            class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="mb-4">
          <label
            class="block text-sm font-medium text-gray-700 mb-2"
            id="countryLabel"
            >–°—Ç—Ä–∞–Ω–∞:</label
          >
          <select
            id="countrySelect"
            class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all bg-white"
          >
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É...</option>
          </select>
        </div>
        <div class="mb-6">
          <label
            class="block text-sm font-medium text-gray-700 mb-2"
            id="cityLabel"
            >–ì–æ—Ä–æ–¥:</label
          >
          <input
            type="text"
            id="cityInput"
            placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥..."
            class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all"
          />
        </div>
        <button
          onclick="saveLocation()"
          class="w-full py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl font-semibold shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all"
          id="applyBtn"
        >
          –ü—Ä–∏–º–µ–Ω–∏—Ç—å
        </button>
      </div>
    </div>

    <!-- Item Detail Modal -->
    <div id="itemModal" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onclick="closeItemModal()"
      ></div>
      <div
        class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-w-md mx-auto max-h-[90vh] overflow-y-auto slide-up"
      >
        <div class="relative">
          <img id="modalImage" src="" alt="" class="w-full h-64 object-cover" />
          <button
            onclick="closeItemModal()"
            class="absolute top-4 right-4 w-10 h-10 bg-black/50 rounded-full flex items-center justify-center text-white hover:bg-black/70"
          >
            <i class="fas fa-times"></i>
          </button>
          <div
            id="myItemBadge"
            class="absolute top-4 left-4 px-3 py-1 bg-teal-500 text-white text-sm font-medium rounded-full hidden"
          >
            <i class="fas fa-user-check mr-1"></i
            ><span id="myItemBadgeText">–ú–æ—è –≤–µ—â—å</span>
          </div>
        </div>
        <div class="p-6">
          <div class="flex items-start justify-between mb-3">
            <h3 id="modalTitle" class="text-xl font-bold text-gray-800"></h3>
            <span
              id="modalCategory"
              class="px-3 py-1 bg-teal-100 text-teal-700 text-xs font-medium rounded-full"
            ></span>
          </div>
          <div class="flex items-center gap-2 text-gray-500 mb-4">
            <i class="fas fa-map-marker-alt text-teal-500"></i>
            <span id="modalLocation"></span>
          </div>
          <div id="modalActions"></div>
        </div>
      </div>
    </div>

    <!-- Premium Modal -->
    <div id="premiumModal" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onclick="closePremiumModal()"
      ></div>
      <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-sm px-4"
      >
        <div class="bg-white rounded-3xl p-6 modal-enter">
          <div class="text-center">
            <div
              class="w-20 h-20 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-amber-500/30"
            >
              <i class="fas fa-crown text-white text-3xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2" id="premiumTitle">
              –ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø
            </h3>
            <p class="text-gray-600 mb-4" id="premiumDesc">
              –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º –∑–∞–∫—Ä—ã—Ç. –û–ø–ª–∞—Ç–∏—Ç–µ –µ–¥–∏–Ω—ã–π –≤–∑–Ω–æ—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
              –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.
            </p>
            <div
              class="bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 mb-4"
            >
              <div class="flex items-center justify-center gap-2">
                <span class="text-3xl font-bold text-amber-700">500 ‚≠ê</span>
              </div>
              <p class="text-amber-600 text-sm mt-1" id="premiumOnetime">
                –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂
              </p>
            </div>
            <button
              id="payButton"
              onclick="processPayment()"
              class="w-full py-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50 transition-all flex items-center justify-center gap-2"
            >
              <span id="payButtonText">–û–ø–ª–∞—Ç–∏—Ç—å</span>
              <div id="payLoader" class="loading-spinner hidden"></div>
            </button>
            <button
              onclick="closePremiumModal()"
              class="mt-3 text-gray-500 text-sm hover:text-gray-700 transition-colors"
              id="premiumCancelBtn"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-black/70 backdrop-blur-sm"
        onclick="closeContactModal()"
      ></div>
      <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-sm px-4"
      >
        <div class="bg-white rounded-3xl p-6 modal-enter">
          <div class="text-center">
            <div
              class="w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-teal-500/30"
            >
              <i class="fas fa-phone text-white text-3xl"></i>
            </div>
            <h3
              class="text-xl font-bold text-gray-800 mb-2"
              id="contactSellerTitle"
            >
              –ö–æ–Ω—Ç–∞–∫—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞
            </h3>
            <div class="bg-teal-50 rounded-2xl p-4 mb-4">
              <p
                id="contactInfo"
                class="text-lg font-semibold text-teal-700"
              ></p>
            </div>
            <a
              id="contactLink"
              href="#"
              target="_blank"
              class="block w-full py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl font-semibold shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all text-center"
            >
              <i class="fab fa-telegram mr-2"></i
              ><span id="writeTelegramText">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</span>
            </a>
            <button
              onclick="closeContactModal()"
              class="mt-3 text-gray-500 text-sm hover:text-gray-700 transition-colors"
              id="closeContactBtn"
            >
              –ó–∞–∫—Ä—ã—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Item Modal -->
    <div id="addModal" class="fixed inset-0 z-50 hidden">
      <div
        class="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onclick="closeAddModal()"
      ></div>
      <div
        class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-w-md mx-auto h-[90vh] overflow-y-auto slide-up"
      >
        <div
          class="sticky top-0 bg-white border-b border-gray-100 px-6 py-4 flex items-center justify-between z-10"
        >
          <h3 class="text-xl font-bold text-gray-800" id="addItemTitle">
            –î–æ–±–∞–≤–∏—Ç—å –≤–µ—â—å
          </h3>
          <button
            onclick="closeAddModal()"
            class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="p-6">
          <form id="addItemForm" onsubmit="submitItem(event)">
            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="photoLabel"
                >–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è</label
              >
              <div
                id="photoUpload"
                class="border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center cursor-pointer hover:border-teal-500 hover:bg-teal-50 transition-all"
                onclick="document.getElementById('itemPhoto').click()"
              >
                <div id="uploadPlaceholder">
                  <i class="fas fa-camera text-4xl text-gray-400 mb-2"></i>
                  <p class="text-gray-500 text-sm" id="uploadPhotoText">
                    –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
                  </p>
                </div>
                <div id="uploadPreview" class="hidden">
                  <img
                    src=""
                    alt="Preview"
                    class="w-full h-40 object-cover rounded-xl"
                  />
                  <p class="text-teal-600 text-sm mt-2">
                    <i class="fas fa-check mr-1"></i
                    ><span id="photoLoadedText">–§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</span>
                  </p>
                </div>
              </div>
              <input
                type="file"
                id="itemPhoto"
                class="hidden"
                accept="image/*"
                onchange="previewPhoto(event)"
              />
            </div>
            <!-- Item Type Selector -->
            <div class="mb-6">
              <label class="block text-sm font-bold text-gray-700 mb-2" id="typeLabel">–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?</label>
              <div class="flex gap-2">
                <button type="button" id="typeBtnGiveaway" onclick="setItemType('giveaway')" class="flex-1 py-3 px-2 rounded-xl border-2 border-teal-500 bg-teal-50 text-teal-700 font-bold transition-all text-xs">
                  <i class="fas fa-gift mr-1"></i><span id="typeGiveawayLabel">–û—Ç–¥–∞—é</span>
                </button>
                <button type="button" id="typeBtnWish" onclick="setItemType('wish')" class="flex-1 py-3 px-2 rounded-xl border-2 border-gray-100 bg-white text-gray-500 font-bold transition-all text-xs">
                  <i class="fas fa-bullhorn mr-1"></i><span id="typeWishLabel">–ò—â—É</span>
                </button>
              </div>
            </div>

            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="nameLabel"
                >–ù–∞–∑–≤–∞–Ω–∏–µ</label
              >
              <input
                type="text"
                id="itemTitle"
                required
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–µ—Ç—Å–∫–∞—è –∫–æ–ª—è—Å–∫–∞"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all"
              />
            </div>
            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="categoryLabel"
                >–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label
              >
              <select
                id="itemCategory"
                required
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all bg-white"
              >
                <option value="" id="selectCategoryOpt">
                  –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                </option>
                <option value="clothes" id="optClothes">–û–¥–µ–∂–¥–∞</option>
                <option value="toys" id="optToys">–ò–≥—Ä—É—à–∫–∏</option>
                <option value="gear" id="optGear">–ö–æ–ª—è—Å–∫–∏ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∫–∏</option>
                <option value="seats" id="optSeats">–ê–≤—Ç–æ–∫—Ä–µ—Å–ª–∞</option>
                <option value="other" id="optOther">–î—Ä—É–≥–æ–µ</option>
              </select>
            </div>
            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="countryFormLabel"
                >–°—Ç—Ä–∞–Ω–∞</label
              >
              <select
                id="itemCountry"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all bg-white"
              >
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É...</option>
              </select>
            </div>
            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="cityFormLabel"
                >–ì–æ—Ä–æ–¥</label
              >
              <input
                type="text"
                id="itemCity"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ë–∞—Ç—É–º–∏"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all"
              />
            </div>
            <div class="mb-4">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="districtLabel"
                >–†–∞–π–æ–Ω</label
              >
              <input
                type="text"
                id="itemDistrict"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–∞–±—É—Ä—Ç–∞–ª–æ"
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all"
              />
            </div>
            <div class="mb-6">
              <label
                class="block text-sm font-medium text-gray-700 mb-2"
                id="contactFormLabel"
                >–ö–æ–Ω—Ç–∞–∫—Ç (Telegram)</label
              >
              <input
                type="text"
                id="itemContact"
                required
                placeholder="@username –∏–ª–∏ +1..."
                class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all"
              />
            </div>
            <button
              type="submit"
              id="submitButton"
              class="w-full py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl font-semibold shadow-lg shadow-teal-500/30 hover:shadow-teal-500/50 transition-all flex items-center justify-center gap-2"
            >
              <span id="publishBtn">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</span>
              <div id="submitLoader" class="loading-spinner hidden"></div>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div
      id="successToast"
      class="fixed top-8 left-1/2 -translate-x-1/2 z-[60] hidden"
    >
      <div
        class="bg-gray-900 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3"
      >
        <i class="fas fa-check-circle text-green-400"></i>
        <span id="toastMessage">–£—Å–ø–µ—à–Ω–æ!</span>
      </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm hidden">
      <div class="bg-white w-full max-w-sm rounded-[2rem] overflow-hidden modal-enter">
        <div class="bg-gradient-to-r from-teal-600 to-teal-500 p-6 text-white text-center">
          <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3">
            <i class="fas fa-trophy text-3xl"></i>
          </div>
          <h2 class="text-xl font-bold" id="leaderboardTitle">–¢–æ–ø –ì–µ—Ä–æ–µ–≤</h2>
          <p class="text-teal-100 text-sm" id="topHeroesText">–õ—É—á—à–∏–µ –¥–∞—Ä–∏—Ç–µ–ª–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
        </div>
        <div class="p-4 max-h-[60vh] overflow-y-auto" id="leaderboardList">
          <!-- Leaderboard items will be loaded here -->
        </div>
        <div class="p-4 bg-gray-50 border-t">
          <button onclick="closeLeaderboard()" class="w-full py-3 bg-white border border-gray-200 text-gray-600 rounded-xl font-semibold hover:bg-gray-100 transition-all">
            –ó–∞–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
